"use strict";!function(){var endTime,count,cacheMatchArr,resumeData={},pageState=0,InersetPosObj={},resumeEnCode=null,sunHelper__utils={page:"未知",time:0,logger:function(type){var typeMap={log:"日志系统--",warn:"提示您--",error:"错误警告--"},consoleStyleSheet={log:"font-weight: bold; color: #fff;background-image: linear-gradient(-60deg, #16a085 0%, #f4d03f 100%);",warn:"font-weight: bold;  color: #fff;background: linear-gradient(to right, #f6d365 0%, #fda085 100%);color: #fff;",error:"font-weight: bold; color: #fff;background: linear-gradient(to right, #ff9569 0%, #e92758 100%);"};if(-1!=["log","warn","error"].indexOf(type))return function(text){console[type]("%c [- sunHelper -] (简历助手) %c"+typeMap[type]+": "+text,consoleStyleSheet[type],"color: #00009c;margin-left: 10px")}},setTimeStart:function(){sunHelper__utils.time=Date.parse(new Date)},setTimeEnd:function(){sunHelper__utils.time=Date.parse(new Date)-sunHelper__utils.time},getTimeEnd:function(){var timer=setTimeout(function(_){sunHelper__utils.time=0,clearTimeout(timer)});return sunHelper__utils.time},logShortcut:{start:function(pageName){sunHelper__utils.page=pageName,sunHelper__utils.logger("log")(pageName+" 开始解析...")},loadRnssResumeData:function(){sunHelper__utils.setTimeStart(),sunHelper__utils.logger("log")(sunHelper__utils.page+" 开始匹配rnss系统简历...")},createFrameStructureFirst:function(){sunHelper__utils.logger("log")(sunHelper__utils.page+" 开始构建寄生外壳...")},createFrameStructureSecond:function(){sunHelper__utils.setTimeEnd(),sunHelper__utils.logger("log")(sunHelper__utils.page+"解析耗时:"+sunHelper__utils.getTimeEnd()/1e3+"s"),sunHelper__utils.logger("log")(sunHelper__utils.page+" 开始填充寄生内容...")},loadRnssResumeDataOK:function(){sunHelper__utils.logger("log")(sunHelper__utils.page+" rnss系统简历拉取完毕")},loadRnssResumeDataFail:function(type,url,data,ret){var typeMap={1:"返回的数据格式有误",2:"数据异常"};sunHelper__utils.logger("error")(sunHelper__utils.page+typeMap[type]+",请求日志：【url】"+url+"【参数】："+data+(ret?"【返回值】："+ret:"")),sunHelper__tip(typeMap[type]+",请F12查看具体信息",999999,"error")},showRiskDetailLog:function(riskList){var riskListShow=0<(riskList||[]).length;sunHelper__utils.logger(riskListShow?"log":"warn")(sunHelper__utils.page+(riskListShow?"开始填充简历提示":"请注意，未获取到简历风险"))},showHighlightDetailLog:function(hightLight){var hightLightShow=0<(hightLight||[]).length;sunHelper__utils.logger(hightLightShow?"log":"warn")(sunHelper__utils.page+(hightLightShow?"开始填充简历亮点":"请注意，未获取到简历亮点"))},showResumeWorkDiffs:function(list){var hightLightShow=0<(list||[]).length;sunHelper__utils.logger(hightLightShow?"log":"warn")(sunHelper__utils.page+(hightLightShow?"开始填充工作差异":"请注意，未获取到工作差异"))},tryScroll:function(){sunHelper__utils.logger("log")(sunHelper__utils.page+"[试错方案一]尝试获取资源...")},wait:function(count){sunHelper__utils.logger("warn")(sunHelper__utils.page+"[试错方案二]尝试获取资源..."+count+"次")},getSuccess:function(){sunHelper__utils.logger("log")(sunHelper__utils.page+"获取资源成功")}}},pageModel={JobId:0},FrameStructure={createParasiticDom:function(){var sunHelperlayout_l=$("<div class='sunhelper__parasitic_leftMod' id='sunhelperLeftMod'>正在匹配人选信息，请稍后...</div>"),sunHelperlayout_r=$("<div class='sunhelper__parasitic_rightMod' id='sunhelperRightMod'></div>"),sunHelperWrap=$("<div class='sunhelper__parasitic_wrap' id='sunhelperWrap'></div>");return sunHelperWrap.append(sunHelperlayout_l),sunHelperWrap.append(sunHelperlayout_r),sunHelperWrap},createToLogin:function(){return{context:$("<div class='sunhelper__parasitic_toLogin flex__mod-1' id='sunHelperToLogin'>匹配之前需要登录RNSS系统哦 <br/> <span class='sunHelper__font_subtext sunHelper__font_warnning'>如已登录请点击立即刷新</span></div>"),tools:[FrameStructure.pageBtnGroup.btn_toLogin("sunHelprt__btn sunHelprt__btn_primary"),FrameStructure.pageBtnGroup.btn_refershPage("sunHelprt__btn sunHelprt__btn_primary")]}},createToUpdate:function(){var btn_download=FrameStructure.pageBtnGroup.btn_download("sunHelprt__btn sunHelprt__btn_primary");return{context:$("<div class='sunhelper__parasitic_toLogin flex__mod-1' id='sunHelperToUpdate'>您的简历助手版本较低，请更新 </div>"),tools:[btn_download]}},createCannotAnalysis:function(){return{context:$("<div class='sunhelper__parasitic_cannotAnalysis flex__mod-1' >当前简历无法解析，换一份试试吧</div>")}},createHanlderTip:function(text){return{context:$("<div class='sunhelper__parasitic_toLogin flex__mod-1'>"+text+"</div>")}},createInputToRnss:function(configJson){return{context:$("<div class='sunhelper__parasitic_toLogin flex__mod-1' id='sunHelperInputToRnss'>未批匹配到系统简历， 可以一键录入到系统哦~ </div>"),tools:[FrameStructure.pageBtnGroup.btn_toRnss("sunHelprt__btn sunHelprt__btn_primary",configJson)]}},createSettingMod:function(){var btn_setting=$("<a href='#'>个性化设置</a>"),warp=$("<div class='sunhelper__parasitic_settingMod' style='color: #1265A7; font-weight: 600'>锐仕方达简历助手 </div>");return btn_setting.click(FrameStructureFuncModule.method_setting),warp},createResumeDetail:function(rnssResumeData){var resumesMatchInfo=rnssResumeData.ResumesMatchInfo,phoneNumber=rnssResumeData.MobileNumber[0],email=rnssResumeData.EmailAddress[0],name=rnssResumeData.Name,resumeid=resumesMatchInfo[0].ResumeId,btn_check=FrameStructure.pageBtnGroup.btn_check("sunHelprt__btn sunHelprt__btn_primary",resumeid),btn_refersh=FrameStructure.pageBtnGroup.btn_refersh("sunHelprt__btn sunHelprt__btn_primary",resumeid),btn_visit=FrameStructure.pageBtnGroup.btn_visit("sunHelprt__btn sunHelprt__btn_primary",resumeid);return{context:$("<div class='sunhelper__parasitic_resumeDetail'>姓名："+emptyShell(name)+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;电话号码："+emptyShell(phoneNumber)+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;电子邮箱："+emptyShell(email)+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp; 简历匹配度：<span>"+emptyShell(resumesMatchInfo[0].MatchScore)+"%</span><div>"),tools:[btn_check,btn_refersh,btn_visit]}},insertToWrap:function($d){$("#sunhelperWrap").append($d)},insertAndReplaceToWrap:function($o){$("#sunhelperLeftMod").html(""),$("#sunhelperRightMod").html(""),$("#sunhelperLeftMod").append(FrameStructure.createSettingMod()),$("#sunhelperLeftMod").append($o.context),$o.tools&&$o.tools.forEach(function(tool){$("#sunhelperRightMod").append(tool)})},pageBtnGroup:{btn_toLogin:function(classes){var btn_toLogin=$("<span class='"+classes+"'>去登陆</span>");return btn_toLogin.click(FrameStructureFuncModule.method_tpLogin),btn_toLogin},btn_refershPage:function(classes){var btn_refershPage=$("<span class='"+classes+"'>刷新</span>");return btn_refershPage.click(FrameStructureFuncModule.method_refershPage),btn_refershPage},btn_download:function(classes){var btn_download=$("<span class='"+classes+"'>点击下载最新</span>");return btn_download},btn_toRnss:function(classes,configJson){var btn_toRnss=$("<span class='"+classes+"'>立即录入</span>");return btn_toRnss.click(FrameStructureFuncModule.method_toRnss(configJson)),btn_toRnss},btn_check:function(classes,id){var btn_check=$("<span class='"+classes+"'>查看简历</span>");return btn_check.click(FrameStructureFuncModule.method_check(id)),btn_check},btn_controlls:function(classes,id,configJson){var btn_innerWarp=$("<div class='sunHelper__inner_btnWarp'></div>"),btn_can=$("<span class='"+classes+"'>简历操作</span>"),controllsWarp=$("<span class='sunHelper__controlls_btnWarp'></span>");btn_innerWarp.append(controllsWarp);var btn_check=$("<span class='sunHelper__innerbtn'>查看</span>"),btn_refersh=$("<span class='sunHelper__innerbtn'>更新</span>"),btn_toRnss=$("<span class='sunHelper__innerbtn'>录入</span>");return controllsWarp.append(btn_check).append(btn_refersh).append(btn_toRnss),btn_innerWarp.append(btn_can).append(controllsWarp),btn_check.click(FrameStructureFuncModule.method_check(id)),btn_toRnss.click(FrameStructureFuncModule.method_toRnss(configJson)),btn_refersh.click(FrameStructureFuncModule.method_refersh(id)),btn_innerWarp},btn_visit:function(classes,id){var btn_visit=$("<span class='"+classes+"'>加入寻访</span>");return btn_visit.click(FrameStructureFuncModule.method_visit(id)),btn_visit}},pageParasitic:{createWrap:function($el,data){var warp=$("<div class='sunHelper__detail_wrap' id='parasiticDetail'></div>"),dynamicConent=$("<div class='sunHelper__dynamic_content sunHelper__unset'></div>");dynamicConent.hide(),dynamicConent.append(FrameStructure.pageParasitic.createRightBar(data)).append(FrameStructure.pageParasitic.createLeftBar(data)),warp.append(FrameStructure.pageParasitic.createResumeBar(data)).append(dynamicConent),$el.before(warp)},createResumeBar:function(){var warp=$("<div class='sunHelper__detail_resumebar' id='sunHelperResumebar'></div>"),logoWarp=FrameStructure.pageParasitic.createResumeBarItem(FrameStructure.pageParasitic.createLogoContent(),"sunHelper__logoWrap sunHelper__border_r--before"),loading_mod=FrameStructure.pageParasitic.createResumeBarItem("<div>正在努力搜索人选的联系方式，请稍候……<div>","sunHelper__textWrap sunHelper__loading");return warp.append(logoWarp).append(loading_mod),warp},insertResumeBarContent:function(data,configJson){var warp=$("#sunHelperResumebar"),resumeContactInformation=FrameStructure.pageParasitic.createResumeBarItem(FrameStructure.pageParasitic.createConcantContent(data),"sunHelper__concantWarp sunHelper__border_r"),resumeInfo=FrameStructure.pageParasitic.createResumeBarItem(FrameStructure.pageParasitic.createInfoContent(data,{}),"sunHelper__infoWarp"),controll=FrameStructure.pageParasitic.createResumeBarItem("","sunHelper__controllWarp");FrameStructure.pageParasitic.createHasResumeControll(controll,data,configJson),warp.append(resumeContactInformation).append(resumeInfo).append(controll),FrameStructure.pageParasitic.insertResumeLeftContent(data),FrameStructure.pageParasitic.insertResumeRightContent(data)},insertResumeBarNoContent:function(configJson,data){var warp=$("#sunHelperResumebar"),noContent=FrameStructure.pageParasitic.createResumeBarItem("<div>很遗憾，没能挖出任何联系方式……该买就买吧！记得要录入系统哦！<div>","sunHelper__textWrap"),controll=FrameStructure.pageParasitic.createResumeBarItem("","sunHelper__controllWarp");FrameStructure.pageParasitic.createToInputControll(controll,configJson),warp.append(noContent).append(controll),FrameStructure.pageParasitic.insertResumeLeftContent(data),FrameStructure.pageParasitic.insertResumeRightContent(data)},insertResumeToLogin:function(){var warp=$("#sunHelperResumebar"),noContent=FrameStructure.pageParasitic.createResumeBarItem("<div>请登录RNSS系统，登录后请点击刷新<div>","sunHelper__textWrap"),controll=FrameStructure.pageParasitic.createResumeBarItem("","sunHelper__controllWarp");FrameStructure.pageParasitic.createToLoginControll(controll),warp.append(noContent).append(controll)},insertResumeLeftContent:function(data){var wrap=$("#sunHelperLeftbar"),l_content=FrameStructure.pageParasitic.createLeftConent(data);wrap.append(l_content)},insertResumeRightContent:function(data){var wrap=$("#sunHelperRightbar"),r_content=FrameStructure.pageParasitic.createSearchContent(data),requireMentContent=FrameStructure.pageParasitic.createRequireMentContent(data);wrap.append(r_content).append(requireMentContent)},insertUpdateHelper:function(){var warp=$("#sunHelperResumebar"),toUpdateContent=FrameStructure.pageParasitic.createResumeBarItem("<div>您的简历助手版本较低，请更新<div>","sunHelper__textWrap"),controll=FrameStructure.pageParasitic.createResumeBarItem("","sunHelper__controllWarp");warp.append(toUpdateContent).append(controll)},insertCannotAnalysis:function(){var warp=$("#sunHelperResumebar"),cannotAnalysis=FrameStructure.pageParasitic.createResumeBarItem("<div>当前简历无法解析，换一份试试吧<div>","sunHelper__textWrap");warp.append(cannotAnalysis)},createLeftConent:function(argument_0){var Highlights=(data=0<arguments.length&&void 0!==argument_0?argument_0:{}).Highlights||[],RiskInfo=data.RiskInfo||[],workDiffs=data.WorkDiffArr||[];sunHelper__utils.logShortcut.showRiskDetailLog(RiskInfo),sunHelper__utils.logShortcut.showHighlightDetailLog(Highlights),sunHelper__utils.logShortcut.showResumeWorkDiffs(workDiffs);var html="",data={workdiffs:{title:"工作经历差异",num:workDiffs.length,list:workDiffs.map(function(item){return item.Message=item.Message.replace("系统简历","<span class='resumehelper__matched_remark'>系统简历</span>"),item.Message})},highlight:{title:"简历亮点",num:Highlights.length,list:Highlights.map(function(item){return item.Description})},risk:{title:"简历提示",num:RiskInfo.length,list:RiskInfo.map(function(item){return item.Description})}};return Object.keys(data).forEach(function(key){var _data$key=data[key],title=_data$key.title,num=_data$key.num,list=_data$key.list;0<num&&(html+="<div class='sunHelper__risk_title title__"+key+"'>"+title+'<span class="sunHelprt__font--subtext sunHelper__layout_pl--4">'+num+"</span></div>"),list.forEach(function(itemtext){html+='<div class="sunHelper__risk_item">'+itemtext+"</div>"})}),"<div class='sunHelper__risk sunHelper__scrollbar'>"+(html||"<div class='sunHelper__noData'>暂无数据</div>")+"</div>"},createRequireMentContent:function(){var wrap=$("<div class='sunHelper__requirement sunHelper__scrollbar' id='requirement'><span class='data-no'>输入职位关键词，可进行智能人岗匹配哦！快来试试吧！</span></div>");return wrap.on("click",FrameStructureFuncModule.events.event_refershResumeMark),wrap},updateRequireMentContent:function(data,typeMap,jobid){pageModel.JobId=jobid,0;var wrap=$("#requirement"),TallyResult=data.TallyResult||[],NoTallyResult=data.NoTallyResult||[],JobRemark=data.SetJobKeyWord||[],workDiffs=resumeData.Data.WorkDiffArr||[],jobRemarkEl="<div class='sunHelper__remark' id='sunHelper__remark'><span class='common__title'>关键词要求：</span>";JobRemark.forEach(function(o,index){var data=typeMap[o.Type],result=o.MatchResult+data.unit;jobRemarkEl+='<a class="jobRemark__item jobRemark__item_remark'+index+' jobRemark__item_nomatched" href=\'#\' title="简历关键字"><span class="jobRemark__item_result">'+result+'</span><span class="jobRemark__item_state">(不匹配)</span></a>'}),0==JobRemark.length&&(jobRemarkEl+="<span style='color:rgba(0,0,0,.3)'>暂无简历关键字</span>"),jobRemarkEl+='<span class=\'jobRemark__item_btn jobRemark__item_btn--refersh\' title="点击刷新简历关键字" id="resumeRemarkRefersh"></span>',jobRemarkEl+="<a class='jobRemark__item_btn' href='http://staff.risfond.com/apps/viewjob2.aspx?id="+jobid+'&tabindex=3\' target="_blank">编辑</a>',jobRemarkEl+="</div>";var accordEl="<div class='sunHelper__requirement_accord' style='margin-bottom: 0'><span class='common__title'>符合项：</span>";TallyResult.forEach(function(o){var data=typeMap[o.Type],result=o.MatchResult+data.unit;accordEl+='<a class="tallyResult__item" href=\'#\' data-type="'+o.Type+'">'+matchMap[o.Type]+"匹配("+result+")</a>"}),accordEl+="</div>";var nonConformityEl="<div class='sunHelper__requirement_conformity'><span class='common__title'>异常项：</span>";NoTallyResult.forEach(function(o){var data=typeMap[o.Type],result=o.MatchResult+data.unit;result&&"null"!==result&&(nonConformityEl+='<span class=\'sunHelper__requirement_conformity-item noTallyResult\' data-type="o.MatchResult" title="'+data.concantText+'">'+matchMap[o.Type]+"不匹配("+result+")</span>")}),nonConformityEl+="</div>",(0<TallyResult.length||0<NoTallyResult.length||0<JobRemark.length)&&wrap.html(jobRemarkEl+accordEl+nonConformityEl);var mergeMatchData=[];TallyResult&&TallyResult.forEach(function(o){var type=o.Type,value=o.MatchResult,mapItem=typeMap[type];mergeMatchData.push({text:value+mapItem.unit,tip:mapItem.concantText+"匹配",key:mapItem.key,elWarp:mapItem.scope(),type:type})}),JobRemark&&JobRemark.forEach(function(o,index){mergeMatchData.push({text:o.MatchResult,tip:"",key:"resumeremark_"+index,elWarp:InersetPosObj.resumeBodyClassName,type:1375,class:"resumehelper__matched_remark"})}),workDiffs.filter(function(item){return 1==item.MessageType||2==item.MessageType||0==item.MessageType}).forEach(function(item,index){mergeMatchData.push({text:item.ExternalCompanyName,tip:item.Message,key:"workDiffTip_"+index,elWarp:InersetPosObj.workDiffControll,type:10515,class:"resumehelper__matched_workDiffTip"})}),0<mergeMatchData.length&&(FrameStructureFuncModule.methods_setMatchState.reset(),FrameStructureFuncModule.methods_hightlight(mergeMatchData)),$("#sunHelperRightbar .sunHelper__requirement_accord .tallyResult__item").on("click",FrameStructureFuncModule.events.event_locating),$("#sunHelperRightbar .sunHelper__requirement_accord .tallyResult__item").on("mouseover",FrameStructureFuncModule.events.event_locatingOver),$("#sunHelperRightbar .sunHelper__requirement_accord .tallyResult__item").on("mouseleave",FrameStructureFuncModule.events.event_locatingLeave)},updateSearchListDetail:function(data){var listWrap=$("#seachContentList"),lisBody="<div class='sunHelper__searchContent_list--body'><span class='sunHelper__searchContent_listItem sunHelper__ellipsis'>#"+data.numCode+"</span><span class='sunHelper__searchContent_listItem sunHelper__ellipsis'>"+data.posName+"</span><span class='sunHelper__searchContent_listItem sunHelper__ellipsis'>"+data.clientName+"</span><span class='sunHelper__searchContent_listItem sunHelper__ellipsis'>"+data.updateTime+"</span></div>",btn_cancelEl=$("<div class='sunHelper__searchControll_cancel sunHelper__custor'></div>");btn_cancelEl.on("click",FrameStructureFuncModule.events.event_resetJobs),listWrap.html("<div class='sunHelper__searchContent_list--header'><span class='sunHelper__searchContent_listItem'>职位编号</span><span class='sunHelper__searchContent_listItem'>职位名称</span><span class='sunHelper__searchContent_listItem'>客户名称</span><span class='sunHelper__searchContent_listItem'>更新时间</span></div>"+lisBody).append(btn_cancelEl),$("#searchEl").removeClass("sunHelper__searchContent_shine")},updateGouTongContent:function(list){var ret;list&&Array.isArray(list)&&0!=list.length&&(ret="",list.forEach(function(item){return ret+=function(item){return"<div class='sunHelprt__table_col'><span class='sunHelprt__table_item'>"+item.StaffName+"</span><span class='sunHelprt__table_item'>"+item.PositionName+"</span><span class='sunHelprt__table_item'>"+item.CompanyName+"</span><span class='sunHelprt__table_item'>"+item.Content+"</span><span class='sunHelprt__table_item'>"+item.CreatedTimeText+"</span></div>"}(item)}),$("#goutongDeatail").html(ret))},createSearchContent:function(){var wrap=$("<div class='sunHelper__searchContent_wrap'></div>"),searchWrap=$("<div class='sunHelper__searchContent_search'></div>"),lisWrap=$("<div class='sunHelper__searchContent_list' id='seachContentList'></div>"),conditionsWrap=$("<div class='sunHelper__searchContent_searchResult'></div>"),inputEl=$("<input type='text' value='' placeholder='请输入职位关键词' class='sunHelper__searchContent_input sunHelper__searchContent_shine' id='searchEl'>"),seachList=$("<div class='sunHelper__searchContent_searchListWrap' id='searchWrap'><ul class='sunHelper__searchContent_searchList sunHelper__scrollbar' id='searchList'></ul></div>");return inputEl.on("input",FrameStructureFuncModule.events.event_jobSearch),inputEl.on("focus",FrameStructureFuncModule.events.event_inputFocus),inputEl.on("blur",FrameStructureFuncModule.events.event_inputBlur),seachList.on("click",FrameStructureFuncModule.events.event_searchListClick),conditionsWrap.append(seachList),wrap.append(searchWrap).append(lisWrap),searchWrap.append(inputEl).append(conditionsWrap),wrap},createLogoContent:function(){return"<div class='sunHelper__layout_helf' id='sunHelper__logo'></div><div class='sunHelper__layout_helf sunHelper__sty sunHelper__sty_subtext sunHelper__layout_pl--10 sunHelper__custor' style='font-size: 12px;transform: translateY(-4px);' id='sun_help'>"+helper_version+"</div><div class='sunHelper__layout_helf size__normal' >简历助手</div><div class='sunHelper__layout_helf sunHelper__sty_subtext sunHelper__layout_pl--10' ><span class='sunHelper__btn_set sunHelper__custor style__underline' id='sun_setting'>设置</span></div>"},createConcantContent:function(data){var name=emptyShell(data.Name),email=emptyShell(data.EmailAddress[0]),phonenum=emptyShell(data.MobileNumber[0]),matchScore=emptyShell(data.ResumesMatchInfo[0].MatchScore),lastUpdatedTime=emptyShell(data.LastUpdatedTime);return"<div class='sunHelper__layout_40 sunHelper__ellipsis font__weight'>匹配度：<span class='color__bg_yellow'>"+emptyShell(matchScore)+"%</span></div><div class='sunHelper__layout_60 sunHelper__ellipsis' title='"+emptyShell(email)+"'>邮箱："+emptyShell(email)+"</div><div class='sunHelper__layout_40 sunHelper__ellipsis'>姓名："+emptyShell(name)+"</div><div class='sunHelper__layout_60 sunHelper__ellipsis' >手机号："+emptyShell(phonenum)+"<i class='sunHelper__icon_phone' id='callThePhone'></i></div><div class='sunHelper__layout_60 sunHelper__ellipsis sunHelper__ellipsis_updateTime'>更新时间："+emptyShell(lastUpdatedTime)+"</div><div class='sunHelper__layout_40 sunHelper__ellipsis sunHelper__ellipsis_goutong' id='sun_goutong'><span class='gongtong_tar'>沟通记录</span></div>"},createInfoContent:function(data,stateMap){return(data.Gender&&stateMap.Gender?"<div class='sunhelper__inline'>"+data.Gender+"&nbsp;•&nbsp;</div>":"")+(data.LiveLocation&&stateMap.LiveLocation?"<div class='sunhelper__inline'>"+data.LiveLocation+" &nbsp;•&nbsp;</div>":"")+(0<data.Age&&stateMap.Age?"<div class='sunhelper__inline'>"+data.Age+"岁 &nbsp;•&nbsp;</div>":"")+(data.Education&&stateMap.Education?"<div class='sunhelper__inline'>"+data.Education+"&nbsp;•&nbsp;</div>":"")+(data.YearsExperience&&stateMap.YearsExperience?"<div class='sunhelper__inline'>"+data.YearsExperience+"年工作经验&nbsp;•&nbsp;</div>":"")+(data.RecentJobTitle&&stateMap.RecentJobTitle?"<div class='sunhelper__inline'>"+data.RecentJobTitle+"&nbsp;•&nbsp;</div>":"")+(data.WorkStatus&&stateMap.WorkStatus?"<div class='sunhelper__inline'>"+data.WorkStatus+" &nbsp;•&nbsp;</div>":"")+(data.AnnualSalary&&0<stateMap.AnnualSalary?"<div class='sunhelper__inline'>目前年薪："+(data.AnnualSalary/1e4).toFixed(0)+"万</div>":"")},updateInfoContent:function(dataForm){$(".sunHelper__infoWarp").html(FrameStructure.pageParasitic.createInfoContent(resumeData.Data,{Gender:dataForm.showGender,LiveLocation:dataForm.showLiveLocation,Age:dataForm.showAge,Education:dataForm.showEducation,YearsExperience:dataForm.showYearsExperience,RecentJobTitle:dataForm.showRecentJobTitle,WorkStatus:dataForm.showWorkStatus,AnnualSalary:dataForm.showAnnualSalary}))},createHasResumeControll:function(wrap,data,configJson){var resumeid=data.ResumesMatchInfo[0].ResumeId,btn_refersh=FrameStructure.pageBtnGroup.btn_controlls("sunHelper__parasitic_btn sunHelper__custor",resumeid,configJson),btn_visit=FrameStructure.pageBtnGroup.btn_visit("sunHelper__parasitic_btn sunHelper__custor",resumeid);return wrap.append(btn_refersh).append(btn_visit),"控制面板"},createToLoginControll:function(wrap){var btn_toLogin=FrameStructure.pageBtnGroup.btn_toLogin("sunHelper__parasitic_btn sunHelper__custor"),btn_pageRefersh=FrameStructure.pageBtnGroup.btn_refershPage("sunHelper__parasitic_btn sunHelper__custor");wrap.append(btn_toLogin).append(btn_pageRefersh)},createToUpdateControll:function(wrap){var btn_download=FrameStructure.pageBtnGroup.btn_download("sunHelper__parasitic_btn sunHelper__custor");wrap.append(btn_download)},createToInputControll:function(wrap,configJson){var btn_toRnss=FrameStructure.pageBtnGroup.btn_toRnss("sunHelper__parasitic_btn sunHelper__custor",configJson);wrap.append(btn_toRnss)},createResumeBarItem:function(content,className){return $("<div id='sunHelperResumebar' class='"+className+"'>"+content+"</div>")},createLeftBar:function(){return $("<div class='sunHelper__detail_leftbar content__bar sunHelper__scrollbar' id='sunHelperLeftbar'><div class='sunHelper__parasitic_title--l'>简历提示</div></div>")},createRightBar:function(){return $("<div class='sunHelper__detail_rightBar content__bar sunHelper__border_r-e5' id='sunHelperRightbar'><div class='sunHelper__parasitic_title--r'>职位匹配</div></div>")}},createSettingModal:function(){var wrap=$("<div class='sunHelper__setting_modal' id='settingModal'></div>");wrap.append("<div class='sunHelprt__setting_mod' id='sunHelperSettingModal'><div class='sunHelprt__setting_title'>简历助手设置</div><div class='sunHelprt__setting_helperInfo'><div class='sunHelprt__setting_textTitle'>简历助手展示的信息</div><div class='sunHelprt__setting_detailWrap'><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showGender' id='showGender'> <label class='sunHelprt__setting_checklabel' for='showGender'></label><label for='showGender'>性别</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showAge' id='showAge'> <label class='sunHelprt__setting_checklabel' for='showAge'></label><label for='showAge'>年龄</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showLiveLocation' id='showLiveLocation'> <label class='sunHelprt__setting_checklabel' for='showLiveLocation'></label><label for='showLiveLocation'>居住地址</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showEducation' id='showEducation'> <label class='sunHelprt__setting_checklabel' for='showEducation'></label><label for='showEducation'><label for='showEducation'>最高学历</label></label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showYearsExperience' id='showYearsExperience'> <label class='sunHelprt__setting_checklabel' for='showYearsExperience'></label><label for='showYearsExperience'>工作年限</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showRecentJobTitle' id='showRecentJobTitle'> <label class='sunHelprt__setting_checklabel' for='showRecentJobTitle'></label><label for='showRecentJobTitle'>当前职位</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showWorkStatus' id='showWorkStatus'> <label class='sunHelprt__setting_checklabel' for='showWorkStatus'></label><label for='showWorkStatus'>工作状态</label></div></div><div class='sunHelprt__setting_checkitem'><div class='mycheck'><input type='checkbox' data-key='showAnnualSalary' id='showAnnualSalary'> <label class='sunHelprt__setting_checklabel' for='showAnnualSalary'></label><label for='showAnnualSalary'>目前年薪</label></div></div></div></div><div class='sunHelprt__setting_helperInfo'><div class='sunHelprt__setting_textTitle'>职位匹配</div><div class='sunHelprt__setting_detailWrap mb-20'><div class='sunHelprt__setting_detailradioWrap'><div class='sunHelprt_radio'><input type='radio' id='sun_on' value='1' name='sun_radio' data-key='showJobMatch'><label for='sun_on' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_on'>启用</label></div><div class='sunHelprt_radio'><input type='radio' id='sun_off' value='0'  name='sun_radio' data-key='showJobMatch'><label for='sun_off' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_off'>停用</label></div></div></div></div><div class='sunHelprt__setting_helperInfo'><div class='sunHelprt__setting_textTitle'>简历提示 <div class=\"switch-container\">\n            <input id=\"showAll\" type=\"checkbox\" class=\"switch\" data-key='showAll' />\n            <label for=\"showAll\"></label>\n        </div></div><div class='sunHelprt__setting_detailWrap'><span class='sunHelprt__setting_subtitle'>工作经历差异</span><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_on1' value='1'  name='sun_radio1' data-key='showWorkDiff'><label for='sun_on1' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_on1'>启用</label></div><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_off1' value='0'  name='sun_radio1' data-key='showWorkDiff'><label for='sun_off1' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_off1'>停用</label></div></div><div class='sunHelprt__setting_detailWrap'><span class='sunHelprt__setting_subtitle'>简历亮点</span><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_on2' value='1'  name='sun_radio2' data-key='showHighlights'><label for='sun_on2' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_on2'>启用</label></div><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_off2' value='0'  name='sun_radio2' data-key='showHighlights'><label for='sun_off2' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_off2'>停用</label></div></div><div class='sunHelprt__setting_detailWrap'><span class='sunHelprt__setting_subtitle'>简历风险</span><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_on3' value='1'  name='sun_radio3' data-key='showResumeRemind'><label for='sun_on3' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_on3'>启用</label></div><div class='sunHelprt_radio'><input type='radio' class='resumeTipInput' id='sun_off3' value='0'  name='sun_radio3' data-key='showResumeRemind'><label for='sun_off3' class='radio-label sunHelprt__setting_checklabel'></label><label for='sun_off3'>停用</label></div></div><div class='sunHelprt__setting_footer'><div class='sunHelprt__setting_btn sunHelprt__setting_btn--primary' id='sun_save'>保存设置</div><div class='sunHelprt__setting_btn sunHelprt__setting_btn--disabled' id='sun_cancel'>取消</div></div></div>"),$("html").append(wrap),FrameStructureFuncModule.domEvent.mount_setting()},createHelperModal:function(){var wrap=$("<div class='sunHelper__setting_modal' id='helperModal'></div>"),content=$("<div class='sunHelprt__setting_mod sunHelprt__helper_mod'><div class='sunHelprt__setting_title'>"+helper_version+"版本说明</div><div class='sunHelprt__helper_content'>可以自由个性化控制功能使用，根据大家的工作习惯，点击“个性化设置”，进行设置即可。</div><div class='sunHelprt__helper_subtitle'>职位匹配规则：</div><div class='sunHelprt__helper_content'>优先展示满足所有条件的职位，如不满足所有条件，则根据目前职位＞地区＞年限＞学历＞行业＞年龄 > 职位关键词 进行匹配。</div><div class='sunHelprt__helper_footer'><div class='sunHelprt__setting_btn sunHelprt__setting_btn--primary' id='sun_iknow'>知道了</div></div></div>");wrap.append(content),$("html").append(wrap),FrameStructureFuncModule.domEvent.mount_help()},createGoutongmodal:function(){var wrap=$("<div class='sunHelper__setting_modal' id='goutongModal'></div>"),content=$("<div class='sunHelprt__goutong_mod sunHelprt__helper_mod'><div class='sunHelprt__setting_title goutongModal__title'>沟通记录 <i class='icon__close' id='goutongModal_sure' ></i></div><div class='sunHelprt__helper_content sunHelprt__goutong_content'><div class='sunHelprt__table'><div class='sunHelprt__table_header sunHelprt__table_col'><span class='sunHelprt__table_item'>执行人</span><span class='sunHelprt__table_item'>职位</span><span class='sunHelprt__table_item'>公司</span><span class='sunHelprt__table_item'>内容</span><span class='sunHelprt__table_item'>更新时间</span></div><div class='sunHelprt__table_body sunHelper__scrollbar' id='goutongDeatail'><div class='sunHelprt__table_empty'>暂无沟通记录</div></div></div></div></div>");wrap.append(content),$("html").append(wrap),FrameStructureFuncModule.domEvent.mount_goutong()}},emptyShell=function(val){return val||"--"},FrameStructureFuncModule={tallyResultItemBaseFlag:!1,method_tpLogin:function(){window.open("http://staff.risfond.com")},method_toRnss:function(configJson){return function(){if(7!=configJson.type){FrameStructureFuncModule.method_resethightlight();var base=new Base64,type=configJson.type,code=configJson.code,txt=$("html").html(),params=[{eltype:"input",name:"type",value:type.toString()},{eltype:"textarea",name:"txt",value:txt},{eltype:"input",name:"code",value:code}],temp_form=document.createElement("form");for(var item in temp_form.action="http://staff.risfond.com/apps/editresume.aspx",temp_form.target="_blank",temp_form.method="post",temp_form.style.display="none",params){var val=params[item].value,tar=document.createElement(params[item].eltype);tar.name=params[item].name,tar.value=base.encode(val?val.replace("+","%2B"):""),temp_form.appendChild(tar)}document.body.appendChild(temp_form),temp_form.submit(),$(temp_form).remove()}else FrameStructureFuncModule.events.event_saveResumeEncode(resumeEnCode)}},method_check:function(resumeId){return function(){window.open("http://staff.risfond.com/resume/viewresume?id="+resumeId)}},method_refersh:function(resumeId){return function(){window.open("http://staff.risfond.com/apps/editresume.aspx?id="+resumeId)}},method_visit:function(resumeId){return function(){window.open("http://staff.risfond.com/resume/viewresume?id="+resumeId+"&visit=1&frompage="+configJson.type)}},method_refershPage:function(){window.location.reload()},method_setting:function(){console.log("setting")},method_resethightlight:function(){for(;0<$(".resumehelper__matched").length;){var $d=$($(".resumehelper__matched")[0]),$parent=$($d.parent());$parent.html($parent.html().replace($d.prop("outerHTML"),$d.text().replace(/[\(（][^\)）]+[\)）]$/,"")))}$(".resumehelper__matched_resumeworkExpDiffTip").remove()},methods_hightlight:function(applyList){function set_hightlight($el,text,tip,key,idx,type,className){var matchClassName,html,hasMatched,regText,reg,matchVal,pageValue,htmlCopy;$el&&(matchClassName="resumehelper__match_"+key+(0<=idx?idx:""),htmlCopy="",hasMatched=!1,(html=$el.html())&&(regText=function(){for(var patrn=/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/im,count=0,retText="";text.length>count;){var char=text.charAt(count);retText+=patrn.test(char)?"\\"+char:char,count++}return retText}(),reg=new RegExp(regText,"ig"),pageValue=(matchVal=html.match(reg))?matchVal[0]:text,htmlCopy=html.replace(reg,"<span class='resumehelper__matched "+matchClassName+(className?" "+className:"")+"' id='tallyResultType_"+type+"'>"+pageValue+(tip&&10515!==type?"<span class='resumehelper__matched_tip'>(-"+tip+"-)</span>":"")+"</span>"),10515==type&&htmlCopy!==html&&$el.after("<div class='resumehelper__matched_resumeworkExpDiffTip'>【简历助手提示您】："+tip+"</div>"),htmlCopy!==html&&(hasMatched=!0),hasMatched&&1375==type&&FrameStructureFuncModule.methods_setMatchState.check(text),htmlCopy&&$el.html(htmlCopy)))}FrameStructureFuncModule.method_resethightlight(),applyList.forEach(function(item){item.text&&("function"==typeof item.elWarp&&(item.elWarp=item.elWarp()),0<item.elWarp.length&&"string"!=typeof item.elWarp?Array.prototype.forEach.call(item.elWarp,function(el,idx){"function"==typeof el&&(el=el()),el instanceof $||(el=$(el)),1<el.length?Array.prototype.forEach.call(el,function(el_single){set_hightlight($(el_single),item.text,item.tip,item.key,idx,item.type,item.class)}):set_hightlight($(el),item.text,item.tip,item.key,idx,item.type,item.class)}):set_hightlight(item.elWarp,item.text,item.tip,item.key,null,item.type,item.class))}),0},methods_setMatchState:(count=1,cacheMatchArr=[],{check:function(text){var timer=setTimeout(function(_){0<=cacheMatchArr.indexOf(text)||(cacheMatchArr.push(text),Array.prototype.forEach.call($("#sunHelper__remark>.jobRemark__item_nomatched"),function(d){var cs=d.childNodes,d_text=cs[0],d_state=cs[1],domInfo=null;d_text.innerText==text&&(domInfo=$(d),d.classList.remove("jobRemark__item_nomatched"),d_state.innerText="（匹配）",domInfo.remove(),$("#sunHelper__remark .common__title").after(domInfo))}),count++,clearTimeout(timer))},1e3*count)},reset:function(){count=1,cacheMatchArr=[]}}),events:{event_refershResumeMark:function(e){0<=Array.prototype.indexOf.call(e.target.classList,"jobRemark__item_btn--refersh")&&FrameStructureFuncModule.events.event_getRequirement(pageModel.JobId,resumeData,typeMap)},event_postJobData:function(val){reportResumeDataToRnss("http://staff.risfond.com/Extension/GetJobSearchViewList","get",{keywords:val},function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/GetJobSearchViewList",JSON.stringify({keywords:val}),JSON.stringify(res))}var items="";res.Data?0!=res.Data.length?(res.Data.forEach(function(job){var reg=new RegExp(val);items+="<li class='sunHelper__searchContent_searchList--item' data-name='"+job.Title+"' data-number='"+job.JobId+"' data-posname='"+job.Title+"' data-clientname='"+job.ClientName+"' data-updatetime='"+job.LastUpdateTime+"'>"+job.Title.replace(reg,"<span class='sunHelper__highlight'>"+val+"</span>")+'<span class="sunHelper__searchContent_searchList--client">'+job.ClientName+"</span></li>"}),$("#searchList").html(items)):$("#searchList").html("<li class='no_data'>没有找到符合条件的职位</li>"):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/GetJobSearchViewList",JSON.stringify({keywords:val}),JSON.stringify(res))})},event_getRequirement:function(id,obj,typeMap){"[object Object]"===Object.prototype.toString.call(obj.Data)&&((obj=obj.Data.ResumeMatch||{}).JobId=id,reportResumeDataToRnss("http://staff.risfond.com/Extension/GetJobMatchInfo","get",obj,function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/GetJobMatchInfo",JSON.stringify(obj))}res.Data?FrameStructure.pageParasitic.updateRequireMentContent(res.Data,typeMap,id):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/GetJobMatchInfo",JSON.stringify(obj))}))},event_jobSearch:(endTime=0,function(e){0!=e.target.value.length?($("#searchWrap").s_show(),(new Date).getTime()-endTime<=50||(endTime=(new Date).getTime(),FrameStructureFuncModule.events.event_postJobData(e.target.value))):$("#searchWrap").s_hide()}),event_getGouTong:function(data){reportResumeDataToRnss("http://staff.risfond.com/Extension/GetResumeCommunicationByResumeId","get",data,function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/GetResumeCommunicationByResumeId",JSON.stringify(data),res)}res.Data?FrameStructure.pageParasitic.updateGouTongContent(res.Data):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/GetResumeCommunicationByResumeId",JSON.stringify(data),JSON.stringify(res))})},event_postSetData:function(data){2!=pageState?reportResumeDataToRnss("http://staff.risfond.com/Extension/SetToolInstall","get",data,function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/SetToolInstall",JSON.stringify(data),res)}res.Data?(FrameStructureFuncModule.domEvent.swicthModState(data),$("#settingModal").s_hide(200),sunHelper__tip("设置成功",2e3,"success"),window.location.reload()):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/SetToolInstall",JSON.stringify(data),JSON.stringify(res))}):sunHelper__tip("请先登录rnss系统",3e4,"warn")},event_getSetData:function(){reportResumeDataToRnss("http://staff.risfond.com/Extension/GetToolInstall","post",{},function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/GetToolInstall","",JSON.stringify(res))}if(2!=res.Status){if(!res.data&&2!==res.Status)return res.data={},void sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/GetToolInstall","",JSON.stringify(res));FrameStructureFuncModule.domEvent.event_updateSetting(res.data),FrameStructureFuncModule.domEvent.swicthModState(res.data)}})},event_inputFocus:function(){0!=$("#searchEl").val().length&&FrameStructureFuncModule.events.event_postJobData($("#searchEl").val())},event_searchListClick:function(e){var data,id,$tar=$(e.target);$tar.hasClass("sunHelper__searchContent_searchList--item")&&(data={numCode:emptyShell($tar.data("number")),posName:emptyShell($tar.data("posname")),clientName:emptyShell($tar.data("clientname")),updateTime:emptyShell($tar.data("updatetime"))},id=$tar.data("number"),pageModel.jobId=id,$("#searchEl").val($tar.data("name")),FrameStructure.pageParasitic.updateSearchListDetail(data),FrameStructureFuncModule.events.event_getRequirement(id,resumeData,typeMap),$("#searchWrap").s_hide(200))},event_inputBlur:function(){},event_toggle:function(){var height=0;return function(){$(".sunHelper__dynamic_toggle ").hasClass("sunHelper__rotate")?FrameStructureFuncModule.events.event_showMod(height):FrameStructureFuncModule.events.event_hideMod(function(h){return height=h})}},event_showMod:function(height){var auto;height<=2?$(".sunHelper__dynamic_content").css({height:"auto",transform:"rotateX(0)"}).addClass("sunHelper__unset"):($(".sunHelper__dynamic_content").removeClass("sunHelper__auto"),$(".sunHelper__dynamic_content").css({height:height+"px"}),auto=setTimeout(function(_){$(".sunHelper__dynamic_content").addClass("sunHelper__auto").addClass("sunHelper__unset"),clearTimeout(auto)},200));var timer=setTimeout(function(){$($(".sunHelper__icon_arrow")[0]).removeClass("sunHelper__rotate"),window.clearTimeout(timer)},300)},event_hideMod:function(fn){$(".sunHelper__dynamic_content").removeClass("sunHelper__unset"),$(".sunHelper__dynamic_content").removeClass("sunHelper__auto"),fn($(".sunHelper__dynamic_content").height()+2),$(".sunHelper__dynamic_content").animate({height:0,transform:"rotateX(90deg)"});var timer=setTimeout(function(){$($(".sunHelper__icon_arrow")[0]).addClass("sunHelper__rotate"),window.clearTimeout(timer)},300)},event_locating:function(e){FrameStructureFuncModule.tallyResultItemBaseFlag=!0;var $el=$("#tallyResultType_"+e.target.dataset.type);0!=$el.length&&($el.css({background:"rgba(25, 174, 84, .2)"}),FrameStructureFuncModule.events.event_scrollToElement($el))},event_locatingOver:function(e){FrameStructureFuncModule.tallyResultItemBaseFlag=!1,$("#tallyResultType_"+e.target.dataset.type).css({background:"rgba(25, 174, 84, .2)"})},event_locatingLeave:function(){FrameStructureFuncModule.tallyResultItemBaseFlag||$(".resumehelper__matched  ").css({background:"transparent"})},event_scrollToElement:function($el){$("html,body").animate({scrollTop:$el.offset().top-300},500)},event_resetJobs:function(){$("#searchEl").val(""),$("#seachContentList").html(""),$("#requirement").html("<span class='data-no'>输入职位关键词，可进行智能人岗匹配哦！快来试试吧！</span>"),FrameStructureFuncModule.method_resethightlight(2),reportResumeDataToRnss("http://staff.risfond.com/Extension/SetToolInstallJob","get",{},function(res){(res=JSON.parse(res)).data||sunHelper__tip("貌似服务器开了一点小差~",3e3,"warn")}),$("#searchEl").addClass("sunHelper__searchContent_shine")},event_saveResumeEncode:function(resumeEncode){reportResumeDataToRnss("http://staff.risfond.com/Extension/UploadFiles","post","Base64File="+resumeEncode,function(res){try{res=JSON.parse(res)}catch(e){sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/Extension/UploadFiles",JSON.stringify({resumeEncode:resumeEncode}))}res.data?window.open("http://staff.risfond.com/apps/editresume.aspx?key="+res.data):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/Extension/UploadFiles",JSON.stringify({resumeEncode:resumeEncode}))})}},domEvent:{event_updateSetting:function(data){Object.keys(data).forEach(function(k){"showWorkDiff"!=k?"showHighlights"!=k?"showResumeRemind"!=k?"showJobMatch"!=k?$("#"+k).prop("checked",data[k]):data[k]?$("#sun_on").prop("checked",!0):($("#sun_off").prop("checked",!0),FrameStructureFuncModule.method_resethightlight()):data[k]?$("#sun_on3").prop("checked",!0):$("#sun_off3").prop("checked",!0):data[k]?$("#sun_on2").prop("checked",!0):$("#sun_off2").prop("checked",!0):data[k]?$("#sun_on1").prop("checked",!0):$("#sun_off1").prop("checked",!0)}),FrameStructure.pageParasitic.updateInfoContent(data)},mount_setting:function(){var resumeTipResumeTars=$(".resumeTipInput");$("#sun_setting").on("click",function(){$("#settingModal").fadeIn(200)}),$("#sun_save").on("click",function(){var dataForm={},checkboxes=$("#sunHelperSettingModal").find("input[type=checkbox]"),inputs=$("#sunHelperSettingModal").find("input[type=radio]");Array.prototype.forEach.call(checkboxes,function(elem){var key=elem.dataset.key;dataForm[key]=elem.checked}),Array.prototype.forEach.call(inputs,function(elem){var key=elem.dataset.key;elem.checked&&(dataForm[key]=1==elem.value)}),FrameStructureFuncModule.events.event_postSetData(dataForm)}),$("#sun_cancel").on("click",function(){$("#settingModal").fadeOut(200),FrameStructureFuncModule.events.event_getSetData()}),$("#showAll").on("click",function(e){FrameStructureFuncModule.domEvent.settingHelper.controllAllRadios(e.target.checked)}),$(".resumeTipInput").on("click",function(){var switchBarState=0;Array.prototype.forEach.call(resumeTipResumeTars,function(elem){elem.dataset.key;elem.checked&&(switchBarState+=Number(elem.value))}),0<switchBarState?$("#showAll").prop("checked",!0):$("#showAll").prop("checked",!1)})},mount_goutong:function(){setTimeout(function(_){$("#goutongModal_sure").on("click",function(){$("#goutongModal").fadeOut(200)}),$("#sun_goutong").on("click",function(){$("#goutongModal").fadeIn(200),FrameStructureFuncModule.events.event_getGouTong({resumeId:resumeData.Data.ResumeIdList[0]})})},2e3)},settingHelper:{controllAllRadios:function(showAll){for(var num=3;0<num;)$("#"+(showAll?"sun_on":"sun_off")+num).prop("checked",!0),num--}},mount_help:function(){$("#sun_help").on("click",function(){$("#helperModal").fadeIn(200)}),$("#sun_iknow").on("click",function(){$("#helperModal").fadeOut(200)})},mount_scrollEvents:function(){var top=$("#sunHelperResumebar").offset().top;$(window).scroll(function(){var toTop=document.documentElement.scrollTop||document.body.scrollTop;top-toTop<0?($("#sunHelperResumebar").addClass("fixed__top"),$(".sunHelper__dynamic_content").css({marginTop:"10px"})):($("#sunHelperResumebar").removeClass("fixed__top"),$(".sunHelper__dynamic_content").css({marginTop:"0"}))})},swicthModState:function(data){var toggleBtn,showJobMatch=data.showJobMatch,showResumeRemind=data.showAll;return(showJobMatch||showResumeRemind)&&((toggleBtn=$("<span class='sunHelper__dynamic_toggle sunHelper__icon_arrow' id='sunHelper__toggel_btn'></span>")).on("click",FrameStructureFuncModule.events.event_toggle()),0==$("#sunHelper__toggel_btn").length?$("#parasiticDetail").append(toggleBtn):$("#sunHelper__toggel_btn").show(),$(".sunHelper__dynamic_content").s_show(200)),showJobMatch||showResumeRemind?!showJobMatch&&showResumeRemind?($("#sunHelperRightbar").hide(200),void $("#sunHelperLeftbar").show(200).animate({flex:1})):!showResumeRemind&&showJobMatch?($("#sunHelperLeftbar").hide(200),$("#sunHelperRightbar").show(200).animate({flex:1}),void setTimeout(function(_){$("#sunHelperRightbar").css({overflow:"unset"})},500)):void(showResumeRemind&&showJobMatch&&($("#sunHelperRightbar").show(200).animate({flex:"0 0 780px"}),$("#sunHelperLeftbar").show(200).css({flex:"0 0 418px"}),setTimeout(function(_){$("#sunHelperRightbar").css({overflow:"unset"})},500))):($(".sunHelper__dynamic_content").s_hide(200),void $("#sunHelper__toggel_btn").hide(500))}}},switchHelper_s=function(state,configJson){switch(pageState=state){case 1:return function(state,fn){if(4!=state&&5!=state)return 6==state?(FrameStructure.insertAndReplaceToWrap(FrameStructure.createInputToRnss(this)),void FrameStructure.pageParasitic.insertResumeBarNoContent(this,resumeData.Data)):void fn()}.bind(configJson);case 2:FrameStructure.pageParasitic.insertResumeToLogin();break;case 3:FrameStructure.pageParasitic.insertUpdateHelper();break;case 4:FrameStructure.pageParasitic.insertCannotAnalysis()}},moduleMethods={computedHelperLayout:function(){$("body").css({paddingTop:$("#sunhelperWrap").height()+"px"}),$("#callThePhone").on("click",function(){var resumeId=resumeData.Data.ResumeIdList[0],resumePhone=resumeData.Data.MobileNumber[0];window.open("http://staff.risfond.com/resume/viewresume?id="+resumeId+"&showdlg=1&callTophone="+resumePhone)})}};function Base64(){var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=_utf8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4);return output},this.decode=function(input){var chr1,chr2,chr3,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)chr1=_keyStr.indexOf(input.charAt(i++))<<2|(enc2=_keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=_keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=_keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));return output=_utf8_decode(output)};var _utf8_encode=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):(127<c&&c<2048?utftext+=String.fromCharCode(c>>6|192):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128)),utftext+=String.fromCharCode(63&c|128))}return utftext},_utf8_decode=function(utftext){for(var string="",i=0,c=c1=c2=0;i<utftext.length;)(c=utftext.charCodeAt(i))<128?(string+=String.fromCharCode(c),i++):191<c&&c<224?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return string}}function createFrameStructure(inersetPosObj,sunhelpStatus,rnssHelprtStatus,rnssResumeData,configJson){var strategyMethod;-131==sunhelpStatus&&sunHelper__utils.logShortcut.createFrameStructureFirst(),0==$("#sunHelperResumebar").length&&FrameStructure.pageParasitic.createWrap(inersetPosObj.mainControll),0==$("#sunHelperSettingModal").length&&FrameStructure.createSettingModal(),0==$("#helperModal").length&&FrameStructure.createHelperModal(),0==$("#goutongModal").length&&FrameStructure.createGoutongmodal(),-131!=sunhelpStatus&&(sunHelper__utils.logShortcut.createFrameStructureSecond(),(strategyMethod=switchHelper_s(sunhelpStatus,configJson))&&strategyMethod(rnssHelprtStatus,function(){0!=rnssResumeData.WriteStatus?1!=rnssResumeData.WriteStatus?2!=rnssResumeData.WriteStatus?3!=rnssResumeData.WriteStatus||tip("录入失败",3e3,"error"):tip("录入成功",3e3,"success"):0<rnssResumeData.Count?FrameStructure.pageParasitic.insertResumeBarContent(rnssResumeData,configJson):FrameStructure.pageParasitic.insertResumeBarNoContent(configJson,rnssResumeData):FrameStructure.pageParasitic.insertResumeBarNoContent(configJson,rnssResumeData.Data)}),FrameStructureFuncModule.events.event_getSetData(),FrameStructureFuncModule.domEvent.mount_scrollEvents(),$(".sunHelper__loading").remove(),moduleMethods.computedHelperLayout())}function reportResumeDataToRnss(url,method,data,callback){var str="?";Object.keys(data).forEach(function(key,index){str+=(0!==index?"&":"")+key+"="+data[key]});var message={type:"ajax",url:"get"==method.toLowerCase()?url+str:url,method:method,data:data};chrome.runtime.sendMessage(message,function(response){callback(response)})}window.createSystemAssociation=function(resume,inersetPosObj,configJson,hasone,typeMap,cb){var base;InersetPosObj=inersetPosObj,0!=resume.length?(base=new Base64,resumeEnCode=base.encode(resume.html().replace("+","%2B")+inersetPosObj.concatVM),createFrameStructure(inersetPosObj,-131),sunHelper__utils.logShortcut.loadRnssResumeData(),console.log(resume.html().replace("+","%2B")),reportResumeDataToRnss("http://staff.risfond.com/extension/queryresumes","post","type="+configJson.type+(""!==hasone?"&hasone="+hasone:"")+"&version="+helper_version+"&htmlresume="+resumeEnCode,function(response){var handleBefore=inersetPosObj.resetPageBefore,matchMap=inersetPosObj.matchMap||{};"function"==typeof handleBefore&&handleBefore();try{response=JSON.parse(response),sunHelper__utils.logShortcut.loadRnssResumeDataOK()}catch(e){return void sunHelper__utils.logShortcut.loadRnssResumeDataFail(1,"/extension/queryresumes","简历相关数据",response,response)}console.log(response);var cacheJobData,rnssHelprtStatus,sunhelpStatus=response.Status,rnssResumeData=response.Data;rnssResumeData?(cacheJobData=rnssResumeData.JobSearchView,rnssResumeData.ResumeDTO,resumeData=response,rnssHelprtStatus=rnssResumeData.Status,createFrameStructure(inersetPosObj,sunhelpStatus,rnssHelprtStatus,rnssResumeData,configJson),cb&&cb(rnssResumeData),cacheJobData&&(FrameStructure.pageParasitic.updateSearchListDetail({numCode:cacheJobData.JobId,posName:cacheJobData.Title,clientName:cacheJobData.ClientName,updateTime:cacheJobData.LastUpdateTime}),$("#searchEl").val(cacheJobData.Title)),FrameStructureFuncModule.events.event_getRequirement(cacheJobData?cacheJobData.JobId:0,resumeData,typeMap),window.typeMap=typeMap,window.configJson=configJson,window.matchMap=matchMap):sunHelper__utils.logShortcut.loadRnssResumeDataFail(2,"/extension/queryresumes","简历相关数据",JSON.stringify(response),JSON.stringify(response))})):console.log(0)},window.FrameStructureFuncModule=FrameStructureFuncModule,window.sunHelper__utils=sunHelper__utils,window.convertImgToBase64=function(url,callback,outputFormat){var canvas=document.createElement("CANVAS"),ctx=canvas.getContext("2d"),img=new Image;img.setAttribute("crossOrigin","Anonymous"),img.onload=function(){canvas.height=img.height,canvas.width=img.width,ctx.drawImage(img,0,0);var dataURL=canvas.toDataURL(outputFormat||"image/png");callback.call(this,dataURL),canvas=null},img.src=url}}();